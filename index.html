<!DOCTYPE html>
<html>
  <head>
    <meta
      charset="utf-8"
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>LAG Player</title>
    <link
      rel="preload"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css?family=Lobster|Rampart One|Patrick Hand|Akaya Telivigala|Fredoka"
    />
    <link
      rel="preload"
      as="style"
      onload="this.rel='stylesheet'"
      type="text/css"
      href="welcome.css"
    />
    <link
      rel="preload"
      as="style"
      onload="this.rel='stylesheet'"
      type="text/css"
      href="duDialog.css"
    />
    <link
      rel="preload"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link
      id="favicon"
      rel="shortcut icon"
      type="image/png"
      href="https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/favicon.ico?v=1648377298689"
    />
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="duDialog.js"></script>
    <script src="detectmobilebrowser.js"></script>
    <div id="black">
      
    </div>
    <div id="cat">
      <div id="cattext">
        <img
          id="icon"
          src="https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/Black_%26_Red_Flag.png?v=1648566076432"
        />
      </div>
      <b style="color: white; font-size: 29px; position: absolute" id="tut"
        >Click to learn more...</b
      >
    </div>
    <div id="overlay">
      <div id="text">
        <p id="text1">Good page!</p>
        <div id="countdown" style="text-align: center">
          Video ends after <span>XX</span> seconds.
        </div>
        <br />
        <p id="text2">You can wait video ends</p>
        <p id="or" style="text-align: center">OR</p>
        <button id="start">CLICK HERE to run player</button>
      </div>
    </div>
    <div id="container">
      <video id="vid" muted preload><source src="" /></video>
    </div>
    <script>
      $("#black").hide();
      
      var video = document.getElementById("vid");
      container.onclick = function () {
        tut1();
        new duDialog(
          null,
          "This page looks good WHEN FULLSCREEN IS ON and DON'T CLICK RIGHT MOUSE BUTTON :)",
          {
            buttons: duDialog.OK_CANCEL,
            okText: "Ok",
            cancelText: "Let me think...",
            callbacks: {
              okClick: function () {
                anim1();
                this.hide();
              },
              cancelClick: function () {
                tut2();
                this.hide();
              },
            },
          }
        );
      };
      function anim1() {
        var element = document.querySelector("#cattext");
        element.classList.add("animate__animated", "animate__flash");
        const videos = [
          "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/fancy.mp4?v=1648133549164",
          "https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/y2mate.com%20-%20Lagtrain%20more%20like_1080p.mp4?v=1648916154162",
          "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/y2mate.com%20-%20Dance%20The%20Night%20Away%20vs%20Crab%20Rave%20TWICE%20x%20Noisestorm%20Mashup_1080p.mp4?v=1648920509150",
          "https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/y2mate.com%20-%20Guys%20look%20a%20birdie%20original_1080p.mp4?v=1652707300327",
          "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/Underbase-%20Fallen%20Down.mp4?v=1655025807625",
          "https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/Cristiano%20Ronaldo%20drinking%20meme%20HD%20(full%20screen).mp4?v=1655559268288",
          "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/The%20fumo%20of%20everything.mp4?v=1656383588457",
          "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/nelward%20-%20GHOST%20fumo%20version.mp4?v=1656385641508"
        ];
        const randomNumber = Math.floor(Math.random() * videos.length);
        const currentVideo = videos[randomNumber];
        const videoElement = document.getElementById("vid");
        element.addEventListener("animationend", () => {
          if (video.muted == true) {
            videoElement.src = currentVideo;
            toggleFullScreen(document.body);
            video.muted = false;
            document.getElementById("overlay").style.display = "block";
            document.getElementById("cat").style.display = "none";
            video.style.opacity = 1;
          } else {
            video.muted = true;
          }
          if (video.paused) {
            video.play();
          }
        });
      }
      function anim2() {
        var element = document.querySelector("#cattext");
        element.classList.add("animate__animated", "animate__flash");
        element.addEventListener("animationend", () => {
          $("#favicon").attr(
            "href",
            "https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/favicon.ico?v=1648377363086"
          );
          if (video.muted == true) {
            $("#black").show();
            video.src =
              "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/y2mate.com%20-%20Rick%20Astley%20%20Never%20Gonna%20Give%20You%20Up%20Official%20Music%20Video_1080p.mp4?v=1648298123755";
            video.muted = false;
            video.addEventListener('loadeddata', (e) => {
   //Video should now be loaded but we can add a second check

   if(video.readyState >= 3){
       //your code goes here
     $("#black").hide();
     document.title = "Get rickrolled haha";
   }

});
            document.getElementById("countdown").innerHTML =
              "Rick needs <span>XX</span> seconds to sing.";
            document.getElementById("text1").innerHTML = "Oops!";
            document.getElementById("text2").innerHTML = "Oh no!";
            document.getElementById("or").innerHTML = "U GOT RICKROLLED :(";
            document.getElementById("start").style.display = "none";          
            document.getElementById("overlay").style.display = "block";
            document.getElementById("cat").style.display = "none";
            video.style.opacity = 1;
          } else {
            video.muted = true;
          }
          if (video.paused) {
            video.play();
          }
        });
      }
      function tut1() {
        $("#tut").css("display", "none");
      }
      function tut2() {
        $("#tut").css("display", "unset");
      }
      video.addEventListener("timeupdate", updateCountdown);
      container.addEventListener("contextmenu", anim2, false);
      function updateCountdown() {
        var timeSpan = document.querySelector("#countdown span");
        timeSpan.innerText =
          video.duration.toFixed() - video.currentTime.toFixed();
      }
      document.getElementById("start").onclick = function () {
        window.location.replace("https://lagplayer.glitch.me/player/");
      };
      video.addEventListener("ended", myHandler, false);
      function myHandler(e) {
        window.location.replace("https://lagplayer.glitch.me/player/");
      }
      function off() {
        document.getElementById("overlay").style.display = "none";
        video.muted = true;
      }
      function toggleFullScreen(elem) {
        if (
          (document.fullScreenElement !== undefined &&
            document.fullScreenElement === null) ||
          (document.msFullscreenElement !== undefined &&
            document.msFullscreenElement === null) ||
          (document.mozFullScreen !== undefined && !document.mozFullScreen) ||
          (document.webkitIsFullScreen !== undefined &&
            !document.webkitIsFullScreen)
        ) {
          if (elem.requestFullScreen) {
            elem.requestFullScreen();
          } else if (elem.mozRequestFullScreen) {
            elem.mozRequestFullScreen();
          } else if (elem.webkitRequestFullScreen) {
            elem.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
          } else if (elem.msRequestFullscreen) {
            elem.msRequestFullscreen();
          }
        } else {
          if (document.cancelFullScreen) {
            document.cancelFullScreen();
          } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
          } else if (document.webkitCancelFullScreen) {
            document.webkitCancelFullScreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
        }
      }
      $("video").prop("volume", 0.5);
      if (document.addEventListener) {
        document.addEventListener("fullscreenchange", exitHandler, false);
        document.addEventListener("mozfullscreenchange", exitHandler, false);
        document.addEventListener("MSFullscreenChange", exitHandler, false);
        document.addEventListener("webkitfullscreenchange", exitHandler, false);
      }
      function exitHandler() {
        if (
          !document.webkitIsFullScreen &&
          !document.mozFullScreen &&
          !document.msFullscreenElement
        ) {
          $("#black").show();
          video.src =
            "https://cdn.glitch.me/8187eb85-ef03-4f68-a096-53cb26af1633/y2mate.com%20-%20Rick%20Astley%20%20Never%20Gonna%20Give%20You%20Up%20Official%20Music%20Video_1080p.mp4?v=1648298123755";
          video.addEventListener('loadeddata', (e) => {
   //Video should now be loaded but we can add a second check

   if(video.readyState >= 3){
       //your code goes here
     $("#black").hide();
     video.play();
     document.title = "Get rickrolled haha";
   }

});
          // video.play();
          document.getElementById("countdown").innerHTML =
            "Rick needs <span>XX</span> seconds to sing.";
          document.getElementById("text1").innerHTML = "Oops!";
          document.getElementById("text2").innerHTML = "Oh no!";
          document.getElementById("or").innerHTML = "U GOT RICKROLLED :(";
          document.getElementById("start").style.display = "none";       
          $("#favicon").attr(
            "href",
            "https://cdn.glitch.global/8187eb85-ef03-4f68-a096-53cb26af1633/favicon.ico?v=1648377363086"
          );
        }
      }
      window.addEventListener(
        "contextmenu",
        function (e) {
          e.preventDefault();
          tut1();
        },
        false
      );
      var box = document.getElementById("tut"),
        colors = [
          "#ff0000",
          "#ff4000",
          "#ff8000",
          "#ffbf00",
          "#ffff00",
          "#bfff00",
          "#80ff00",
          "#40ff00",
          "#00ff00",
          "#00ff40",
          "#00ff80",
          "#00ffbf",
          "#00ffff",
          "#00bfff",
          "#0080ff",
          "#0040ff",
          "#0000ff",
          "#4000ff",
          "#8000ff",
          "#bf00ff",
          "#ff00ff",
          "#ff00bf",
          "#ff0080",
          "#ff0040",
          "#ff0000",
        ],
        currentColor = Math.floor(Math.random() * 25 + 1),
        win = window,
        ww = win.innerWidth,
        wh = win.innerHeight,
        translateX = Math.floor(Math.random() * ww + 1),
        translateY = Math.floor(Math.random() * wh + 1),
        boxWidth = box.offsetWidth,
        boxHeight = box.offsetHeight,
        boxTop = box.offsetTop,
        boxLeft = box.offsetLeft,
        xMin = -boxLeft,
        yMin = -boxTop,
        xMax = win.innerWidth - boxLeft - boxWidth,
        yMax = win.innerHeight - boxTop - boxHeight,
        request = null,
        direction = "se",
        speed = 4,
        timeout = null;
      init();
      window.addEventListener(
        "resize",
        function (argument) {
          clearTimeout(timeout);
          timeout = setTimeout(update, 100);
        },
        false
      );
      function init() {
        request = requestAnimationFrame(init);
        move();
      }
      function update() {
        xMin = -boxLeft;
        yMin = -boxTop;
        xMax = win.innerWidth - boxLeft - boxWidth;
        yMax = win.innerHeight - boxTop - boxHeight;
      }
      function move() {
        setDirection();
        setStyle(box, {
          transform:
            "translate3d(" + translateX + "px, " + translateY + "px, 0)",
        });
      }
      function setDirection() {
        switch (direction) {
          case "ne":
            translateX += speed;
            translateY -= speed;
            break;
          case "nw":
            translateX -= speed;
            translateY -= speed;
            break;
          case "se":
            translateX += speed;
            translateY += speed;
            break;
          case "sw":
            translateX -= speed;
            translateY += speed;
            break;
        }
        setLimits();
      }
      function setLimits() {
        if (translateY <= yMin) {
          if (direction == "nw") {
            direction = "sw";
          } else if (direction == "ne") {
            direction = "se";
          }
          switchColor();
        }
        if (translateY >= yMax) {
          if (direction == "se") {
            direction = "ne";
          } else if (direction == "sw") {
            direction = "nw";
          }
          switchColor();
        }
        if (translateX <= xMin) {
          if (direction == "nw") {
            direction = "ne";
          } else if (direction == "sw") {
            direction = "se";
          }
          switchColor();
        }
        if (translateX >= xMax) {
          if (direction == "ne") {
            direction = "nw";
          } else if (direction == "se") {
            direction = "sw";
          }
          switchColor();
        }
      }
      function switchColor() {
        var color = Math.floor(Math.random() * 25 + 1);
        while (color == currentColor) {
          color = Math.floor(Math.random() * 25 + 1);
        }
        setStyle(box, { color: colors[color] });
        currentColor = color;
      }
      function getVendor() {
        var ua = navigator.userAgent.toLowerCase(),
          match =
            /opera/.exec(ua) ||
            /msie/.exec(ua) ||
            /firefox/.exec(ua) ||
            /(chrome|safari)/.exec(ua) ||
            /trident/.exec(ua),
          vendors = {
            opera: "-o-",
            chrome: "-webkit-",
            safari: "-webkit-",
            firefox: "-moz-",
            trident: "-ms-",
            msie: "-ms-",
          };
        return vendors[match[0]];
      }
      function setStyle(element, properties) {
        var prefix = getVendor(),
          property,
          css = "";
        for (property in properties) {
          css += property + ": " + properties[property] + ";";
          css += prefix + property + ": " + properties[property] + ";";
        }
        element.style.cssText += css;
      }
    </script>
  </body>
</html>
